\documentclass{book}

\usepackage{etoolbox}

\makeatletter
\def\subtitle#1{\gdef\@subtitle{#1}}
\patchcmd\maketitle
  {{\LARGE \@title \par}}
  {{\LARGE \@title \par}%
   \vskip 1.5em
   {\Large \@subtitle \par}}
\makeatother

\usepackage[utf8x]{inputenc}
\usepackage{amsmath,mathtools,bbm}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{appendix}
\usepackage{enumitem}
\usepackage{bm}
\usepackage{multicol}
\usepackage{geometry}
\usepackage{colortbl}
\usepackage{changepage}
\usepackage{color}
\usepackage{mathrsfs}
\usepackage{bigints}
\usepackage{pdflscape}
\usepackage{adjustbox}
\usepackage{tocloft}
\usepackage{lscape}
\usepackage[colorlinks=true,
            linkcolor=blue,
            urlcolor=blue,
            citecolor=blue]{hyperref}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.97,0.97,0.97}
\definecolor{stringorange}{rgb}{0.95, 0.4, 0.18}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{codepurple},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{stringorange},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}
\lstset{style=mystyle}

\sloppy
\usepackage{tikz, lipsum}% http://ctan.org/pkg/{pgf,lipsum}
\newcommand*{\chapnumfont}{\normalfont\sffamily\huge\bfseries}
\newcommand*{\printchapternum}{
  \begin{tikzpicture}
    \draw[fill,color=gray75] (0,0) rectangle (2cm,2cm);
    \draw[color=white] (1cm,1cm) node { \chapnumfont\thechapter };
  \end{tikzpicture}
}
\newcommand*{\chaptitlefont}{\normalfont\sffamily\Huge\bfseries}
\newcommand*{\printchaptertitle}[1]{\flushright\chaptitlefont#1}

\makeatletter
% \@makechapterhead prints regular chapter heading.
% Taken directly from report.cls and modified.
\def\@makechapterhead#1{%
  \vspace*{50\p@}%
  {\parindent \z@ \raggedleft
    \ifnum \c@secnumdepth >\m@ne
        \printchapternum
        \par\nobreak
        \vskip 20\p@
    \fi
    \interlinepenalty\@M
    \printchaptertitle{#1}\par\nobreak
    \vskip 40\p@
  }}
% \@makeschapterhead prints starred chapter heading.
% Taken directly from report.cls and modified.
\def\@makeschapterhead#1{%
  \vspace*{50\p@}%
  {\parindent \z@ \raggedleft
    \interlinepenalty\@M
    \printchaptertitle{#1}\par\nobreak
    \vskip 40\p@
  }}
\makeatother

\makeatletter\@addtoreset{chapter}{part}\makeatother%

\renewcommand{\cfttoctitlefont}{\hfill\Huge\bfseries\sffamily}

\renewcommand\contentsname{Table of contents}

\definecolor{gray75}{gray}{0.75}

\title{\Huge \bfseries\sffamily Diffusing Ideas}
\subtitle{\Large \bfseries\sffamily \color{gray75} Building algorithms to control noisy real systems}
\author{\bfseries\sffamily Robert J. Hardwick  \and C. M. Gomez-Perales}
\date{\today}

\begin{document}
\begin{titlepage}
\centering
\vspace*{1.5\baselineskip}
{\color{gray75}\rule{13cm}{1.3pt}}\vspace*{-\baselineskip}\vspace*{2pt} % Thick horizontal rule
{\color{gray75}\rule{13cm}{0.4pt}} \\ % Thin horizontal rule
\vspace{1.2\baselineskip} % Whitespace 
{\Huge \bfseries\sffamily Diffusing Ideas} \\ 
\vspace{4mm}
{\Large \bfseries\sffamily \color{gray75} Building algorithms to control noisy real systems \\}
\vspace*{0.75\baselineskip}
{\color{gray75}\rule{13cm}{0.4pt}}\vspace*{-\baselineskip}\vspace*{2.75pt} % Thick horizontal rule
{\color{gray75}\rule{13cm}{1.3pt}} \\ % Thin horizontal rule
\vspace{1.0\baselineskip} % Whitespace 
{\large \bfseries\sffamily Robert J. Hardwick and C. M. Gomez-Perales \\
\vspace*{1.2\baselineskip}}
\today
\vfill
Shared by the authors under an \href{https://opensource.org/licenses/MIT}{MIT License}.\\ \vspace{1mm}
The code to compile this book is open source and can be found in this repository: \url{https://github.com/umbralcalc/diffusing-ideas}.
\end{titlepage}

\chapter*{Introduction}

\emph{Diffusing Ideas} is a book about building code which is able to automatically control noisy systems in the real world. While model-free reinforcement learning is a popular and very powerful approach to generating such algorithms~\cite{sutton2018reinforcement}, this book is devoted to creating algorithms using a more model-based approach. Those readers who are data scientists, research engineers, statistical programmers or computational scientists may find our mathematically descriptive, yet practically-minded, approach in this book quite interesting and unique. 

The book accompanies a lot of new open-source scientific software written with combinations of Go~\cite{golang}, C++~\cite{c++lang}, Python~\cite{pythonlang} and TypeScript~\cite{typescriptlang}. A major motivation for creating these new tools is to prepare a foundation of code from which to develop new and more complex applications. We also hope that the resulting framework will enable anyone to explore and study new phenomena effectively, regardless of their scientific background.

The need to properly test all this software has also provided a wonderful excuse to study and play with an extensive range of mathematical toy models. we've chosen these models based on a fairly broad background of interests, but also to illustrate the remarkable cross-disciplinary applicability of stochastic processes. However, we've often found that mathematical formalities can obscure the computations that a programmer must implement. So, while we've tried to be as ambitious as possible with the level of technical sophistication in these models, we've also tried to write the expressions in a computer-friendly way where feasible\footnote{For example, we'll typically be thinking more in terms of `matrices' and less about `operators'.} and have pseudocode diagrams throughout.

A quick note on the code: any software that we describe in this book (including the software which compiles the book itself~\cite{diffusingideasbookgithub}) will always be shared under a MIT License~\cite{mitlicense} in a public Git repository.\footnote{The repositories will always be somewhere on this list: \href{https://github.com/umbralcalc?tab=repositories}{https://github.com/umbralcalc?tab=repositories}.} Forking these repositories and submitting pull requests for new features or applications is strongly encouraged too, though we apologise in advance if we don't follow these up very quickly as all of this work has to be conducted independently in free time, outside of work hours.

No quest would be complete without a guide, so we think this introduction should end with a list of the key milestones in the book; comprising its four major parts. These parts each correspond to answering one of the following interdependent research questions:

\begin{enumerate}[leftmargin=2.5\parindent] 
\item[{\bfseries\sffamily Part 1.}]{Theoretical background and code design}
\item[{\bfseries\sffamily Part 2.}]{Applications to realistic examples}
\end{enumerate}

\newpage \ \newpage
{\sffamily \tableofcontents}
\mainmatter

\part*{{\sffamily Part 1}}

\input{building_a_generalised_simulator/chapter.tex}

\input{numerical_time_evolution_of_probabilities/chapter.tex}

\input{empirical_probabilistic_reweighting_algorithms/chapter.tex}

\input{generalised_simulation_inference/chapter.tex}

\input{interacting_with_any_system/chapter.tex}

\input{optimising_actions_for_control_objectives/chapter.tex}

\part*{{\sffamily Part 2}}

\input{influencing_house_prices/chapter.tex}

\input{resource_allocation_for_epidemics/chapter.tex}

\input{algo_trading_on_financial_markets/chapter.tex}

\input{sequential_experiment_design/chapter.tex}

\input{angling_for_freshwater_fish/chapter.tex}

\input{managing_a_rugby_match/chapter.tex}

\input{real_time_optimisation_of_supply_chain_logistics/chapter.tex}

\input{stimulating_brain_network_responses/chapter.tex}

\input{inferring_2d_spatial_dynamics/chapter.tex}

\input{a_world_of_hydrodynamic_ensembles/chapter.tex}

\input{quantum_system_control/chapter.tex}
 


%\appendix
%\chapter{First and only appendix}
\backmatter
\bibliographystyle{JHEP}
\bibliography{book}
\end{document}